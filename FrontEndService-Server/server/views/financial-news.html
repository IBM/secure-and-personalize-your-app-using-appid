<!DOCTYPE html>
<html>

<head>
    <title>Financial News Powered by IBM Watson Discovery Service</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel='stylesheet' href='https://unpkg.com/carbon-components/css/carbon-components.min.css' />
    <!-- <link rel='stylesheet' type="text/css" href="../scripts/style.css" /> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- <script src="./../node_modules/carbon-components/scripts/carbon-components.min.js"></script> -->
    <!-- <script src="./../scripts/script.js"></script> -->
    <style>
        .banner {
            height: 50px;
        }

        .top-right-button{
            height: 100%;
            width: 100px;
            color:white;
            font-size: 10pt;
        }

        .page-heading {
            font-size: 20px;
        }

        .custom-container {
            margin-top: 5%;
            margin-left: 3%;
            margin-right: 3%;
        }

        .tile {
            margin-top: 15px;
            margin-left: 15px;
            margin-right: 15px;
        }

        p {
            font-size: 13px;
        }
    </style>
</head>


<!-- <body onload="addMoreTiles()"> -->
<body>
    <div id="header">
        <header class="banner bx--header" role="banner" aria-label="IBM Platform Name" data-header>
    
            <a class="bx--header__name" href="javascript:void(0)" 
            style="font-size: 18pt;"
            title="">
            News from the world of Finance
            </a>
            <div class="bx--header__global">
            <form><button id="personalize" class="bx--header__menu-trigger bx--header__action top-right-button" 
                aria-label="Action 4" formaction="/preferences"
                title="Login to get Personalized News" data-navigation-menu-panel-label-expand="Action 4"
                data-navigation-menu-panel-label-collapse="Close menu" data-product-switcher-target="#switcher-bqavcareoq">
                Personalized News
                <!-- <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="bx--navigation-menu-panel-expand-icon" width="20" height="20" viewBox="0 0 32 32"><path d="M8.24 25.14L7 26.67a13.79 13.79 0 004.18 2.44l.69-1.87A12 12 0 018.24 25.14zM4.19 18l-2 .41A14.09 14.09 0 003.86 23L5.59 22A12.44 12.44 0 014.19 18zM11.82 4.76l-.69-1.87A13.79 13.79 0 007 5.33L8.24 6.86A12 12 0 0111.82 4.76zM5.59 10L3.86 9a14.37 14.37 0 00-1.64 4.59l2 .34A12.05 12.05 0 015.59 10zM16 2V4a12 12 0 010 24v2A14 14 0 0016 2z"></path></svg> -->
                <!-- <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="bx--navigation-menu-panel-collapse-icon" width="50" height="20" viewBox="0 0 32 32"><path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path></svg> -->
            </button></form>
        </div>
        </header>
    </div>

    <div class="custom-container" id="newstiles">

    </div>

    <!-- Tiles  -->
    <!-- <div class="tile bx--grid">
            <div class="bx--tile-container" style="width: 100%"> -->
                    <!-- <div class="bx--row">
                            <div class="bx--col bx--col-md-4 bx--col-sm-4">
                              <div class="bx--tile">1</div>
                            </div>
                            <div class="bx--col bx--col-md-4 bx--col-sm-4">
                              <div class="bx--tile">2</div>
                            </div>
                    </div> -->
                    <!-- <div class=" tile bx--row">
                                    <div class="bx--col bx--col-lg-16">
                                      <div class="bx--tile">3</div>
                                    </div>
                    </div>
                    <div class=" tile bx--row">
                            <div class="bx--col bx--col-lg-16">
                              <div class="bx--tile">3</div>
                            </div>
            </div> -->
                    <!-- </div>
                </div> -->

</body>
<!-- <script src="../node_modules/carbon-components/scripts/carbon-components.min.js" type="text/javascript"></script> -->
<script src="https://unpkg.com/carbon-components/scripts/carbon-components.min.js"></script>
<!-- <script src="script.js" type="text/javascript"></script> -->
<script>
  const newsTiles = document.getElementById('newstiles');

  $(document).ready( async() => {
    await fetch('/getFinanceNews').then(async(response) => {
        news = await response.json();
        // alert(JSON.stringify(news));

        news.forEach(element => {
          newsTiles.innerHTML += `
          <div class="tile bx--row">
          <div class="bx--col bx--col-lg-16">
            <div class="bx--tile">
                <h3>${element.title}</h3>
                <p>${element.text}</p>
                <p>Published On: ${element.publication_date}</p>
                <p>URL: <a href=${element.url}>${element.url}</a></p>
                <p>Host: ${element.host}</p>
                <p>Sentiment: ${element.sentiment}</p>
            </div>
        </div>
        </div>`
    });
  });
});

// $('#personalize').click ( async() => {
//     // alert("Need Personalization");
//     await fetch('/appid/callback');
// });
</script>
</html>